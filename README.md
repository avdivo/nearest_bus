# Ближайший автобус #

База данных городских автобусов  с внедренным приложением телеграмм бота.
Проект написан на Django. 
Основная часть взаимодействия с программой выполняется через интерфейс телеграмм.
Некоторые функции доступны через веб-интерфейс админ-панель Django.

## Функционал приложения ##
- Позволяет подготовить маршруты по которым можно будет оперативно получать информацию 
о движении автобусов (маршрут задается указанием начальной и конечной остановки).
- Отображает расписание отправления выбранных автобусов на конкретной остановке 
в реальном времени, на выбранный период времени.
- Автоматически определяет текущее время и день недели для показа расписания.
- Дает возможность посмотреть полное расписание всех автобусов на этой остановке 
за конкретный день недели.
- Позволяет выбрать интересующие автобусы на выбранной начальной остановке, период
времени, на который будет показано расписание, вид расписания (по времени или по автобусам). 
Дать произвольное имя настроенному маршруту.
- Имеет возможность переназначать дни. Т.е. задать дату и указать каким днем недели эту дату 
будет считать программа, что позволяет правильно отображать расписание на праздничные и перенесенные дни.
- Показывает Help - краткую справку по использованию программы.
- Позволяет отправить сообщение разработчику и получать ответ прямо внутри бота.
- Имеет встроенный модуль (парсер) для получения расписания автобусов с сайта [Миноблавтотранс](https://gpmopt.by/mopt/Home/Index/sluck#/routes/bus).
- С помощью специальной команды может импортировать расписание полученное в результате парсинга в базу данных программы.

## Разворачивание проекта ##

### Подготовка сервера ###

Необходимо подготовить сервер, установить PIP, GIT, virtualenv, Docker, Docker-compose (если предполагается работа в контейнере).
Клонировать репозиторий проекта с GitHub:  
`git@github.com:avdivo/nearest_bus.git`  

Зайти в папку проекта. Создать виртуальное окружение:  
`virtualenv venv`

Активировать виртуальное окружение:  
`source venv/bin/activate`  

Установить зависимости:  
`pip install -r requirements.txt`  

Выполнить миграции:  
`python manage.py migrate`

Создать суперпользователя:  
`python manage.py createsuperuser`

### Создание телеграмм бота ###
Необходимо создать телеграмм бота с помощью BotFather и получить токен.

### Настройка проекта ###
Создать файл .env в корне проекта и добавить в него следующие переменные:  
```
SECRET_KEY=""  # Секретный ключ проекта Django
BOT_TOKEN=""  # Токен телеграмм бота
ADMINS=[xxxxxxxxx, yyyyyyyyy]  # id в Телеграмм администраторов бота
```




start - Перезапуск бота
help - Помощь
message - Сообщение разработчику

